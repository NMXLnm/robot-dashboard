<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>æœºå™¨äººç®¡ç†é¢æ¿</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html,body,#app{height:100%}
    body{
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Helvetica Neue', Arial;
      background: #0f172a;
      color:#fff;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* èƒŒæ™¯éƒ¨åˆ† */
    .bg-wrap{position:fixed;inset:0;overflow:hidden;z-index:-1;}
    .blob{
      position:absolute;width:70vmax;height:70vmax;top:50%;left:50%;
      transform:translate(-50%,-50%);
      filter: blur(60px) saturate(160%);
      opacity:1;
      mix-blend-mode:screen;
      border-radius:50%;
      will-change:transform,opacity;
      animation-timing-function: ease-in-out;
    }
    .b1{background: radial-gradient(circle at 30% 30%, rgba(255,120,200,1) 0%, rgba(145,80,255,0.9) 40%, rgba(80,180,255,0.4) 100%);animation: float1 10s infinite;}
    .b2{background: radial-gradient(circle at 70% 40%, rgba(0,240,255,1) 0%, rgba(90,120,255,0.9) 35%, rgba(200,80,255,0.3) 100%);animation: float2 14s infinite;opacity:0.95;transform:translate(-55%,-55%) scale(1);}
    .b3{background: radial-gradient(circle at 40% 70%, rgba(255,200,90,1) 0%, rgba(255,120,120,0.9) 30%, rgba(180,80,255,0.2) 100%);animation: float3 18s infinite;opacity:0.9;transform:translate(-45%,-45%) scale(1.2);}
    @keyframes float1{0%{transform:translate(-52%,-48%) scale(1)}25%{transform:translate(-45%,-55%) scale(1.15)}50%{transform:translate(-48%,-52%) scale(0.9)}75%{transform:translate(-55%,-45%) scale(1.1)}100%{transform:translate(-52%,-48%) scale(1)}}
    @keyframes float2{0%{transform:translate(-55%,-55%) scale(1)}20%{transform:translate(-50%,-60%) scale(1.2)}50%{transform:translate(-60%,-50%) scale(0.85)}80%{transform:translate(-53%,-57%) scale(1.1)}100%{transform:translate(-55%,-55%) scale(1)}}
    @keyframes float3{0%{transform:translate(-45%,-45%) scale(1.2)}33%{transform:translate(-50%,-50%) scale(1)}66%{transform:translate(-40%,-55%) scale(1.25)}100%{transform:translate(-45%,-45%) scale(1.2)}}
    .noise{pointer-events:none;position:fixed;inset:0;mix-blend-mode:overlay;opacity:0.05;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 120 120"><defs><filter id="n"><feTurbulence baseFrequency="0.8" numOctaves="1" stitchTiles="stitch"/></filter></defs><rect width="120" height="120" fill="white" filter="url(%23n)"/></svg>');}

    /* å‰æ™¯ï¼šæœºå™¨äººé¢æ¿ */
    header {
      padding: 20px;
      text-align: center;
      font-size: 2em;
      font-weight: bold;
      background: rgba(0,0,0,0.3);
    }
    header a {
      font-size: 0.6em;
      margin-left: 15px;
      color: #0ff;
      text-decoration: none;
    }
    #searchInput {
      width: 50%;
      margin: 20px auto;
      display: block;
      padding: 10px;
      border-radius: 8px;
      border: none;
      font-size: 1em;
      text-align: center;
    }
    .panel {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 20px;
      padding: 20px;
    }
    .robot-card {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 16px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(2,6,23,0.6);
      backdrop-filter: blur(12px) saturate(150%);
      transition: transform 0.2s, box-shadow 0.2s;
      opacity: 0;
    }
    .robot-card:hover { transform: scale(1.05); box-shadow: 0 10px 40px rgba(0,0,0,0.6);}
    .robot-card:active { transform: scale(0.95); }

    @keyframes fadeInUp {
      0%   { opacity: 0; transform: translateY(30px) scale(0.9); }
      60%  { opacity: 1; transform: translateY(-10px) scale(1.05); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }

    /* ç”µé‡ä½æ—¶é—ªçƒ */
    .low-battery { animation: lowBatteryFlash 1s infinite; }
    @keyframes lowBatteryFlash {
      0%, 100% { box-shadow: 0 0 10px rgba(255,0,0,0.8); border-color: rgba(255,0,0,0.8); }
      50% { box-shadow: 0 0 25px rgba(255,0,0,1); border-color: rgba(255,0,0,1); }
    }

    .robot-avatar { width: 80px;height: 80px;border-radius: 50%;margin-bottom: 10px;border: 2px solid rgba(255,255,255,0.4);object-fit: cover;}
    .robot-name { font-size: 1.2em;font-weight: bold;margin-bottom: 5px; }

    /* çŠ¶æ€åœ†ç‚¹ */
    .status { font-weight:bold; font-size:1.2em; }
    .status-online::before { content: "ğŸŸ¢ "; }
    .status-offline::before { content: "ğŸ”´ "; }
    .status-unknown::before { content: "ğŸŸ¡ "; }

    /* æ¸å˜æƒ…ç»ªæ ‡ç­¾ */
    .mood-tag{
      display:inline-block;margin:6px 0;padding:4px 12px;
      border-radius:999px;font-size:0.9em;color:#fff;
      font-weight:600;
    }
    .å¼€å¿ƒ{ background: linear-gradient(135deg,#4caf50,#81c784); }
    .ä¸å¼€å¿ƒ{ background: linear-gradient(135deg,#f44336,#e57373); }
    .å¿ƒåŠ¨{ background: linear-gradient(135deg,#e91e63,#f48fb1); }
    .å¤±æœ›{ background: linear-gradient(135deg,#9c27b0,#ba68c8); }

    .battery-bar{height:6px;background:#333;border-radius:3px;overflow:hidden;margin-top:6px;}
    .battery-fill{height:100%;}
  </style>
</head>
<body>
  <div class="bg-wrap" id="bgWrap">
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <div class="blob b3"></div>
    <div class="noise"></div>
  </div>

  <header>
    ğŸ¤– æœºå™¨äººç®¡ç†é¢æ¿
    <a href="settings.html">âš™ è®¾ç½®</a>
  </header>

  <input type="text" id="searchInput" placeholder="æœç´¢æœºå™¨äººåå­—...">

  <div class="panel" id="robotPanel"></div>

  <script src="robots.js"></script>
  <script>
    if(localStorage.getItem("enableAnimation") === "false"){
      document.getElementById("bgWrap").style.display = "none";
    }

    const searchInput = document.getElementById("searchInput");
    const panel = document.getElementById("robotPanel");

    function getBeijingHour(){
      const now = new Date();
      const utc = now.getTime() + now.getTimezoneOffset() * 60000;
      const bj = new Date(utc + 8*3600000);
      return bj.getHours();
    }

    function renderRobots(filter=""){
      panel.innerHTML = "";
      const hour = getBeijingHour();
      const online = (hour >= 10 && hour <= 23);

      window.robots.filter(r=>r.name.toLowerCase().includes(filter.toLowerCase())).forEach((r,i)=>{
        const status = online ? "åœ¨çº¿" : "ç¦»çº¿";
        const statusClass = online ? "status-online" : "status-offline";

        let moodEmoji = "";
        if(r.mood==="å¼€å¿ƒ") moodEmoji="ğŸ˜€";
        else if(r.mood==="ä¸å¼€å¿ƒ") moodEmoji="ğŸ˜";
        else if(r.mood==="å¿ƒåŠ¨") moodEmoji="ğŸ’–";
        else if(r.mood==="å¤±æœ›") moodEmoji="ğŸ˜”";

        const card = document.createElement("div");
        card.className="robot-card";
        if(r.battery < 20) card.classList.add("low-battery");
        card.style.animation = `fadeInUp 0.6s ease forwards`;
        card.style.animationDelay = `${i * 0.1}s`;

        card.innerHTML = `
          <img src="${r.avatar}" class="robot-avatar">
          <div class="robot-name">${r.name}</div>
          <div class="status ${statusClass}">${status}</div>
          <div class="mood-tag ${r.mood}">${moodEmoji} ${r.mood}</div>
          <div class="battery-bar"><div class="battery-fill" style="width:${r.battery}%;background:${r.battery<30?'red':r.battery<60?'yellow':'lime'}"></div></div>
          <div style="font-size:0.8em;margin-top:4px;">ç”µé‡: ${r.battery}%</div>
        `;
        panel.appendChild(card);
      });
    }

    renderRobots();
    searchInput.addEventListener("input", e=>{
      renderRobots(e.target.value);
    });
    setInterval(()=>renderRobots(searchInput.value), 60000);
  </script>
</body>
</html>
